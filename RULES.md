# Lode Runner (1983) - 게임 규칙/메카닉

`game.js` 현재 구현 기준의 규칙 정리 문서입니다.

## 1. 기본 정보

- 해상도: 672x384 (28x16 타일, 타일 24px)
- 업데이트: 30fps 고정 (`tickRate = 1000 / 30`)
- 상태값: `TITLE(0)`, `PLAYING(1)`, `PAUSED(2)`, `DYING(3)`, `LEVEL_COMPLETE(4)`, `GAME_OVER(5)`, `STUCK(6)`, `EDITOR(7)`
- 모드: `classic`(150), `championship`(50)

## 2. 타일

| 값 | 타입 | 문자 | 설명 |
|----|------|------|------|
| 0 | EMPTY | `.` | 빈 공간 |
| 1 | BRICK | `#` | 벽돌 (파기 가능) |
| 2 | SOLID | `@` | 단단한 블록 (파기 불가) |
| 3 | LADDER | `H` | 사다리 |
| 4 | BAR | `-` | 로프/바 |
| 5 | TRAP | `T` | False Floor |
| 6 | GOLD | `$` | 금 |
| 7 | ESCAPE_LADDER | `E` | 탈출 사다리 |

레벨 문자:
- `P`: 플레이어 시작 위치
- `E`: 적 시작 위치

## 3. 플레이어 규칙

- 점프 불가
- 낙하 데미지 없음
- 로프에서는 좌우 이동만 가능
- 금 운반은 1개 제한 (`player.goldCount`)
- 파기는 좌/우 대각선 아래 BRICK만 가능
- 파기된 구멍은 시간 경과 후 복구

## 4. 적(가드) 규칙

- 사다리/바 사용 가능
- BRICK 위 이동 가능 (플레이어와 차이점)
- 금 1개 소지 가능
- 금 줍기 확률: `5%`
- 금 드롭 확률: `2%`
- 구멍에 빠지면 일정 시간 갇힌 뒤 탈출 시도
- 죽으면 상단 랜덤 위치에 리스폰

## 5. 타이밍 상수 (30fps)

| 항목 | 값 | 설명 |
|------|----|------|
| `HOLE_FILL_TIME` | 210 | 구멍 복구 (~7초) |
| `ENEMY_TRAPPED_TIME` | 150 | 적 갇힘 (~5초) |
| `ENEMY_TRAPPED_ESCAPE` | 60 | 탈출 시도 시작 |
| `DEATH_DELAY_FRAMES` | 45 | 사망 연출 (~1.5초) |
| `LEVEL_COMPLETE_DELAY_FRAMES` | 60 | 클리어 대기 (~2초) |

60fps 환산 참고:
- 구멍 복구: 420
- 적 갇힘: 300

## 6. 점수/클리어

| 행동 | 점수 |
|------|------|
| 금 획득 | +250 |
| 적 처리(구멍 복구) | +75 |
| 레벨 클리어 | +1500 + 목숨 1 |

클리어 조건:
1. 모든 금 수집
2. 탈출 사다리 활성화
3. 상단 도달

## 7. 조작

- 이동: 방향키, `A/D`, `J/L`, `W/S`, `I/K`
- 파기: `Z/X`, `U/O`, `F1/F2`
- 시작/재개/일시정지: `ENTER`
- 일시정지: `ESC`
- 재시작: `R`
- 사운드: `M`
- 모드 전환(타이틀): `C`
- 에디터 토글: `E`
- 디버그 레벨 이동: `Shift+N`, `Shift+P`

## 8. 에디터/데모

에디터:
- 타일 선택 `1~8`, 저장 `S`, 로드 `L`, 플레이어 배치 `P`, 적 배치 `E`

데모:
- 30초 무입력 시 자동 데모 시작
- `ENTER`로 데모 종료 후 타이틀 복귀

## 9. 구현 메모

- 모든 로직은 단일 IIFE 구조
- 프레임 카운트 기반 타이밍 사용
- 타일 좌표와 픽셀 좌표를 구분해 처리
